
什么是消息中间件
处理消息的一个中介

不就是一个异步存储消息的队列么，基于生产者消费者模式

应用场景：
分布式系统通讯
例如大公司注册后发送邮件给注册者
发送邮件是另外一套服务器系统
这样使用异步，注册成功 后，将其放入消息中间件mq，然后邮件系统取消息，从而给用户发邮件
这样就实现了异步，同步耗时间啊
如果用同步，使用的http接口通讯，万一发失败了，又得做一系列操作

JMS：
java的消息服务，就是客户端与服务器可以异步消息传输
消息模型：
1.p2p点对点 ---队列实现一个消息只能对一个消费者，不能重复消费------微信的私聊
2.发布订阅---消费者关注主题，主题变化，消费者都能收到消息------微信的公众号


几种常用的MQ
1.ActiviMQ
2.RabbitMQ
3.kafka


消息的幂等性
就是消息不重复，唯一主键的意思
怎么解决MQ幂等性
手动签收

ActiviMQ底层原理：


消费者端代码抛异常，MQ会一直重试，怎么解决消息幂等性？
日志mongdb(json),redis,数据库，来存消息信息，不管成功还是失败
日志中有一个标识，生成每发一个报文对应一个消息ID
处理 消息ID+报文绑定对应生成一个日志
成功或者失败都要改标识------防止重复消费
整体代码一定try。。catch
每天晚上定时job解决消息异常


生产者怎么知道消费者消费成功
消费的必须返回一个标识success，就标识成功了，如果fail，就重试

